# カメラプレビューの表示問題と解決策

## 問題の現象

1. アプリ上でマウスを動かしている時のみカメラプレビューが滑らかに表示
2. マウスを止めると映像が停止
3. マウスをアプリの外に移動させると映像が停止

## 原因

eframe のデフォルトの動作では、以下のイベントが発生した時のみ UI の更新が行われる：

- マウスの移動
- キーボード入力
- ウィンドウのリサイズ
- その他のユーザーインタラクション

これは一般的な GUI アプリケーションでは効率的な動作だが、カメラのリアルタイムプレビューのような
継続的な更新が必要な場合には適していない。

## 解決策

`MainWindow`の`update`メソッドで`ctx.request_repaint()`を呼び出すことで、
次のフレームの描画を即座に要求する：

```rust
impl eframe::App for MainWindow {
fn update(&mut self, ctx: &egui::Context, frame: &mut eframe::Frame) {
// 継続的な更新を要求
ctx.request_repaint();
// 既存の描画処理...
}
}
```

## 解決策の仕組み

1. `request_repaint()`は次のフレームの描画を即座に要求
2. これにより、ユーザーインタラクションの有無に関係なく継続的に画面が更新される
3. カメラのフレーム取得スレッドと描画が同期され、滑らかな表示が実現

## メリット

- リアルタイムな映像表示が可能
- ユーザーインタラクションに依存しない安定した更新
- カメラのフレームレートを最大限活用可能

## デメリット

- CPU 使用率が若干上昇する可能性
- バッテリー消費が増加する可能性

## 補足

この解決策は、リアルタイム性が重要なアプリケーション（カメラプレビュー、ゲーム、アニメーションなど）
で特に有効です。通常の GUI アプリケーションでは、デフォルトの更新方式で十分です。
